<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบข้อสอบกฎหมายอาญาทหาร ๒๕๖๘ (Advanced Red Edition)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&display=swap');
        
        :root {
            --primary-red: #c0392b;
            --dark-red: #8e1e13;
            --bg-dark: #1a1a1a;
            --card-bg: #2c3e50;
            --accent-gold: #f1c40f;
            --text-light: #ecf0f1;
        }

        body { 
            font-family: 'Sarabun', sans-serif; 
            background-color: var(--bg-dark);
            background-image: linear-gradient(135deg, #1a1a1a 0%, #3d0a0a 100%);
            display: flex; 
            justify-content: center; 
            align-items: flex-start; 
            min-height: 100vh; 
            margin: 0; 
            padding: 40px 20px;
            color: var(--text-light);
        }

        .container { 
            background: rgba(44, 62, 80, 0.95); 
            padding: 40px; 
            border-radius: 20px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); 
            border: 2px solid var(--primary-red);
            width: 100%; 
            max-width: 800px; 
            backdrop-filter: blur(10px);
        }

        .header { 
            text-align: center; 
            margin-bottom: 40px; 
            border-bottom: 4px double var(--primary-red); 
            padding-bottom: 25px; 
        }

        h1 { 
            color: var(--primary-red); 
            margin: 0; 
            font-size: 28px; 
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        }

        #login-screen { text-align: center; padding: 50px 0; }
        
        input[type="text"], textarea { 
            width: 90%; 
            padding: 15px; 
            margin: 15px 0; 
            border: 2px solid #444; 
            border-radius: 12px; 
            font-size: 18px; 
            text-align: center;
            font-family: 'Sarabun', sans-serif;
            background: rgba(0,0,0,0.2);
            color: white;
            transition: 0.3s;
        }

        input[type="text"]:focus, textarea:focus {
            border-color: var(--primary-red);
            outline: none;
            background: rgba(0,0,0,0.4);
            box-shadow: 0 0 10px rgba(192, 57, 43, 0.3);
        }

        textarea { 
            height: 120px; 
            width: 100%; 
            text-align: left; 
            resize: none; 
            box-sizing: border-box;
            padding: 20px;
        }
        
        .quiz-item { 
            background: rgba(255,255,255,0.05); 
            padding: 25px; 
            border-radius: 15px; 
            margin-bottom: 30px; 
            border-left: 8px solid var(--primary-red);
            transition: 0.3s;
        }

        .quiz-item:hover {
            background: rgba(255,255,255,0.08);
            transform: translateX(5px);
        }

        .question-text { 
            font-weight: bold; 
            font-size: 19px; 
            color: var(--text-light); 
            margin-bottom: 20px; 
            line-height: 1.6; 
        }

        .options-group label { 
            display: block; 
            padding: 15px; 
            margin: 10px 0; 
            background: rgba(255,255,255,0.1); 
            border: 1px solid #444; 
            border-radius: 10px; 
            cursor: pointer; 
            transition: 0.2s;
        }

        .options-group label:hover { 
            background: var(--dark-red); 
            border-color: var(--primary-red);
            color: white;
        }

        .options-group input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
        }
        
        button { 
            background: var(--primary-red); 
            color: white; 
            padding: 18px 40px; 
            border: none; 
            border-radius: 12px; 
            font-size: 20px; 
            font-weight: bold; 
            cursor: pointer; 
            width: 100%; 
            transition: 0.3s; 
            margin-top: 20px;
            text-transform: uppercase;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        button:hover { 
            background: var(--dark-red); 
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
        }
        
        .hidden { display: none; }
        
        .user-tag { 
            color: var(--accent-gold); 
            font-weight: bold; 
            text-align: right; 
            margin-bottom: 20px; 
            font-size: 18px;
        }
        
        #result-screen { text-align: center; }

        .score-circle { 
            width: 180px; 
            height: 180px; 
            line-height: 180px; 
            border-radius: 50%; 
            background: var(--primary-red); 
            color: white; 
            font-size: 50px; 
            font-weight: bold; 
            margin: 30px auto; 
            border: 8px solid var(--accent-gold);
            box-shadow: 0 0 30px rgba(192, 57, 43, 0.5);
        }
        
        .type-tag { 
            font-size: 13px; 
            padding: 4px 10px;
            border-radius: 5px;
            background: var(--accent-gold);
            color: #000;
            font-weight: bold; 
            margin-bottom: 10px; 
            display: inline-block; 
        }

        .type-tag-choice { background: #3498db; color: white; }

        #feedback-msg {
            color: var(--accent-gold);
            font-size: 24px;
            margin: 20px 0;
            font-weight: bold;
        }

        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { background: var(--bg-dark); }
        ::-webkit-scrollbar-thumb { background: var(--primary-red); border-radius: 5px; }
    </style>
</head>
<body>

<div class="container">
    <div id="login-screen">
        <div class="header">
            <h1>⚖️ ระบบทดสอบศาลทหารมหาโหด</h1>
            <p style="color: var(--accent-gold); font-size: 18px;">วินิจฉัยประมวลกฎหมายอาญา พ.ศ. ๒๕๖๘</p>
        </div>
        <p>ระบุชื่อตุลาการเพื่อเริ่มการพิจารณาคดี</p>
        <input type="text" id="username" placeholder="ระบุชื่อตุลาการ...">
        <button onclick="startQuiz()">เข้าสู่บัลลังก์พิจารณา</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div class="user-tag" id="display-name"></div>
        <div class="header">
            <h1>บัลลังก์พิจารณาคดี (สุ่ม ๓๐ ข้อ)</h1>
        </div>
        <div id="quiz-container"></div>
        <button onclick="calculateScore()">ลงมติและตัดสินคดี</button>
    </div>

    <div id="result-screen" class="hidden">
        <h1 style="color: var(--accent-gold);">บัญชีคำพิพากษา</h1>
        <div id="user-result-name" style="font-size: 24px; margin-top: 10px; color: white;"></div>
        <div class="score-circle" id="score-display">0/30</div>
        <p id="feedback-msg"></p>
        <p style="color: #aaa; font-style: italic;">"ระบบตรวจสอบคีย์เวิร์ดแม่นยำ ๘๐% ตามบรรทัดฐานตุลาการ"</p>
        <button onclick="location.reload()" style="background: #555; margin-top: 30px;">กลับสู่หน้าหลัก</button>
    </div>
</div>

<script>
    const allowedUsers = ["mininbird", "ruok555sf"]; 

    const essayQuestions = [
        { q: "พันโท ก. สั่งให้ สิบเอก ข. แอบนำ 'ภาพถ่ายแผนผังคลังแสง' ไปขายให้สายลับต่างชาติ แต่สิบเอก ข. ทำภาพหลุดลงโซเชียลแทนจนเกิดความปั่นป่วน วินิจฉัยความผิดของสิบเอก ข.", keys: ["๓๖", "กบฏ", "๒๕", "สถานหนัก", "ภาพลักษณ์"] },
        { q: "พลทหาร เอ ใช้ 'ไอดีรอง' ปลอมเป็นนายทหารชั้นผู้ใหญ่เพื่อสั่งให้สารวัตรทหารปล่อยตัวเพื่อนที่ถูกคุมขังอยู่ วินิจฉัยพฤติการณ์นี้ตามมาตรา ๓๐, ๓๕ และ ๔๑", keys: ["๓๐", "๓๕", "แอบอ้าง", "ไอดีรอง", "สถานหนัก"] },
        { q: "จ่าสิบเอก ค. ประมาททำปืนลั่นใส่ถังน้ำมันจนเกิดระเบิดและจลาจลย่อมๆ ในค่าย ทหารในค่ายบางส่วนถือโอกาสนั้นยักยอกเสบียงหนีไป วินิจฉัยความรับผิดของจ่าสิบเอก ค.", keys: ["๔๐", "๒๗", "ประมาท", "จลาจล", "ความมั่นคง"] },
        { q: "สิบตรี ง. ถูกยืนยันว่ากระทำความผิดยักยอกทรัพย์ แต่อยู่ในระหว่างการรอขึ้นศาลในวันที่ ๑๐ ธันวาคม ๒๕๖๘ สถานะของสิบตรี ง. คืออะไร และศาลสั่งลดชั้นยศได้หรือไม่?", keys: ["จำเลย", "ไม่สามารถ", "๑๐", "๑๑", "สิบเอก"] },
        { q: "ทหารนายหนึ่งใช้อำนาจตามเอกสิทธิ์กฎหมายสั่งปิดค่ายเพื่อ 'ซ้อมรบส่วนตัว' จนทหารในสังกัดบาดเจ็บและเกิดความแตกแยก วินิจฉัยตามมาตรา ๒๑, ๒๔ และ ๑๙", keys: ["๒๔", "๑๙", "เอกสิทธิ์", "แตกแยก", "สถานหนัก"] },
        { q: "พลทหาร ซี แอบติดตั้ง 'โปรแกรมช่วยเล่น' ในคอมพิวเตอร์ส่วนกลางเพื่อปั๊มคะแนนฝึกออนไลน์จนระบบรวนและภาพลักษณ์หน่วยเสียหาย วินิจฉัยโทษ?", keys: ["๓๑", "๓๖", "กบฏ", "สถานหนัก", "ช่วยเล่น"] },
        { q: "หากมีคดี 'ทหารฆ่าตำรวจ' โดยประมาทในที่สาธารณะหน้าค่ายทหาร วินิจฉัยมาตราที่เกี่ยวข้องและสถานะของคู่กรณี", keys: ["๔๐", "๓๙", "ทหาร", "ตำรวจ", "ประมาท"] },
        { q: "สิบเอก ว. จงใจไม่รายงานว่าเครื่องบินฝึกมีปัญหา เพราะอยากให้ศัตรูทางการเมืองของตนที่เป็นคนขับเกิดอุบัติเหตุ วินิจฉัยความผิด?", keys: ["๑๒", "๒๒", "ละเว้น", "เจตนาฆ่า", "นิ่งเฉย"] },
        { q: "การปลอมแปลง 'หลักสูตรการฝึก' (มาตรา ๒๙) เพื่อเรียกรับเงินจากพลทหารที่อยากสอบผ่าน (มาตรา ๒๘) วินิจฉัยระดับโทษ?", keys: ["๒๙", "๒๘", "ทุจริต", "สถานหนัก", "หลายกรรม"] },
        { q: "พลเรือนคนหนึ่งแอบอ้างเป็นทหาร (มาตรา ๓๐) เพื่อเข้าไปแฮ็กระบบข้อมูลของกองทัพ (มาตรา ๓๑) ศาลทหารมีอำนาจตัดสินหรือไม่?", keys: ["ไม่", "๗", "๕", "จารีต", "รัฐธรรมนูญ"] },
        { q: "การ 'เนรเทศ' ตามมาตรา ๑๑(๔) สามารถสั่งใช้กับจำเลยที่กระทำผิดฐาน 'กบฏ' ตามมาตรา ๓๖ ได้หรือไม่?", keys: ["ได้", "๓๖", "สถานหนัก", "๑๑"] },
        { q: "สิบเอก จ. ขับรถจี๊ปหลวงไปรับแฟนโดย 'ไม่ได้รับอนุญาต' และ 'ไม่มีใบขับขี่' ทั้งยังขับป่วนเมือง วินิจฉัยมาตรา ๓๓, ๓๔ และ ๔๒", keys: ["๓๓", "๓๔", "๔๒", "กรรมเดียว", "หนักที่สุด"] },
        { q: "หากศาลทหารพิพากษาประหารชีวิตทหารนายหนึ่ง คำพิพากษานี้ชอบด้วยกฎหมายฉบับนี้หรือไม่?", keys: ["ไม่ชอบ", "๙", "๑๐", "๑๑", "ไม่มีประหาร"] },
        { q: "คำนิยาม 'โดยทุจริต' ในมาตรา ๗ ครอบคลุมถึงการช่วยเหลือให้เพื่อนไม่ต้องถูกขังหรือไม่?", keys: ["ครอบคลุม", "ประโยชน์", "มิควรได้", "ผู้อื่น"] },
        { q: "จ่าสิบเอกแก้คะแนนให้พลทหารโดยอ้างว่า 'สงสาร' ไม่ได้รับเงิน วินิจฉัยความผิด?", keys: ["๑๕", "๑๘", "มิชอบ", "ทุจริต", "๗"] },
        { q: "ทหารสารวัตรพยายามจับกุมสิบเอกคนหนึ่ง แต่สิบเอกคนนั้นสั่งให้ลูกน้องในสังกัดมาล้อมสารวัตรไว้ วินิจฉัยพฤติการณ์สิบเอก?", keys: ["๒๑", "๔๔", "ขัดขวาง", "มิชอบ"] },
        { q: "การก่อจลาจลตามมาตรา ๒๗ หากมีผู้เสียชีวิต ศาลจะลงโทษอย่างไร?", keys: ["๒๗", "๒๒", "สถานหนัก", "ฆาตกรรม"] },
        { q: "สิบเอก ค. แอบแก้ไข 'คำสั่งย้าย' ของตนเองให้ไปอยู่ในหน่วยที่สบายขึ้น วินิจฉัยมาตรา?", keys: ["๒๙", "๑๕", "ปลอม", "มิชอบ"] },
        { q: "หากจำเลยเบิกความเท็จ (มาตรา ๔๓) จนทำให้เพื่อนทหารต้องถูกเนรเทศ (มาตรา ๑๑) วินิจฉัยโทษจำเลย?", keys: ["๔๓", "สถานหนัก", "เนรเทศ"] },
        { q: "สถานะ 'ผู้ต้องหา' จะเปลี่ยนเป็น 'จำเลย' เมื่อใด?", keys: ["พิจารณา", "ศาล", "ฟ้อง", "รับฟ้อง", "๗"] },
        { q: "ทหารประมาท (มาตรา ๔๐) ทำฐานข้อมูลรั่วไหล แต่ข้อมูลนั้นไม่ใช่ความลับร้ายแรง วินิจฉัยโทษ?", keys: ["๔๐", "สถานเบา", "ประมาท"] },
        { q: "สิบเอก เอ ใช้ไอดีรองไปหมิ่นประมาทพันโท ก. วินิจฉัยระดับโทษ?", keys: ["๑๓", "๓๕", "สถานหนัก", "ไอดีรอง"] },
        { q: "การ 'คุมขัง' ในมาตรา ๗ หากทหารถูกขังเกิน ๗๒ ชั่วโมงโดยไม่มีคำสั่งศาล ผิดมาตราใด?", keys: ["๑๕", "๒๑", "มิชอบ", "เกิน"] },
        { q: "หากจำเลยทำผิดฐานกบฏ (มาตรา ๒๕) แต่ศาลเห็นว่าทำไปเพราะความประมาท (มาตรา ๔๐) ศาลควรวินิจฉัยอย่างไร?", keys: ["ยกฟ้อง", "๒๕", "๔๐", "เจตนา"] },
        { q: "ทหารใช้เอกสิทธิ์ (มาตรา ๒๔) แอบอ้างเป็นบุคคลอื่น (มาตรา ๓๐) เพื่อทำธุรกรรม วินิจฉัยกรรม?", keys: ["หลายบท", "หนักที่สุด", "สถานหนัก", "๒๔", "๓๐"] },
        { q: "การละเลยหน้าที่ (มาตรา ๒๖) กับ ละเว้นการปฏิบัติหน้าที่ (มาตรา ๑๒) ต่างกันอย่างไรในเชิงวินิจฉัย?", keys: ["๒๖", "๑๒", "ไม่ทำตามงาน", "จงใจ", "ผลบางอย่าง"] },
        { q: "ทหารสารวัตรสั่งให้รถหยุด แต่คนขับตะโกนด่าแล้วขับหนีไปเฉยๆ โดยไม่มีการต่อสู้ วินิจฉัย?", keys: ["๔๑", "๒๐", "ไม่หยุด", "หลบหนี"] },
        { q: "หากทหารนายหนึ่งกระทำผิดฐาน 'ชำเราศพ' ซึ่งกฎหมายนี้ไม่ได้เขียนไว้ ต้องทำอย่างไร?", keys: ["๕", "จารีต", "รัฐธรรมนูญ", "ดุลพินิจ"] },
        { q: "การลงโทษจำคุก ๒๔ ชั่วโมง ตามมาตรา ๙ ต้องทำอย่างไร?", keys: ["๙", "เหมาะสม", "สถานเบา", "บันทึก"] },
        { q: "คำพิพากษาถือเป็นที่สิ้นสุด ตามมาตรา ๖ หากภายหลังพบว่าพยานหลักฐานโดนแฮ็ก (มาตรา ๓๑) ศาลจะทำอย่างไร?", keys: ["เปลี่ยนแปลง", "๖", "รูปคดี", "ข้อยกเว้น"] }
    ];

    const choiceQuestions = [
        { q: "๑. หากศาลตัดสินว่าทหารนายหนึ่งมีความผิดและสั่ง 'ขึ้นบัญชีวินัยเลว' เพียงอย่างเดียว การลงโทษนี้ถือเป็นโทษระดับใด?", a: "ค", options: ["ก. โทษสถานเบา", "ข. โทษสถานกลาง", "ค. โทษสถานเบา หรือ โทษสถานกลาง", "ง. โทษสถานหนัก"] },
        { q: "๒. นายทหารสัญญาบัตรผู้หนึ่งถูกตัดสินว่าทำผิด 'ฐานขัดคำสั่งผู้บังคับบัญชา' (มาตรา ๑๑) เขาจะได้รับโทษสูงสุดในระดับใดตามที่มาตรานี้ระบุ?", a: "ก", options: ["ก. โทษสถานเบา", "ข. โทษสถานกลาง", "ค. โทษสถานหนัก", "ง. ลดอัตราชั้นยศ"] },
        { q: "๓. ตามมาตรา ๗ บุคคลที่ถูกยืนยันว่ากระทำความผิดแล้ว 'แต่ยังมิได้เข้าสู่กระบวนการพิจารณาคดี' มีสถานะทางกฎหมายว่าอย่างไร?", a: "ข", options: ["ก. ผู้ต้องสงสัย", "ข. ผู้ต้องหา", "ค. จำเลย", "ง. นักโทษ"] },
        { q: "๔. 'การแบนจากเซิร์ฟเวอร์' ตามมาตรา ๑๑ (๔) ของหมวดประเภทอัตราโทษ เทียบเท่ากับโทษในลักษณะใด?", a: "ค", options: ["ก. การคุมขัง", "ข. การขึ้นบัญชีดำ", "ค. การเนรเทศออกนอกราชอาณาจักร", "ง. การให้ออกจากราชการโดยไร้เกียรติ"] },
        { q: "๕. หากเกิดกรณีที่กฎหมายนี้ 'มิได้บัญญัติความผิดไว้' มาตรา ๘ กำหนดให้ใช้อำนาจใดเป็นอำนาจสูงสุดในการพิจารณา?", a: "ค", options: ["ก. ผู้บังคับบัญชาสูงสุด", "ข. จารีตประเพณีทหาร", "ค. ดุลพินิจของศาลรัฐธรรมนูญ", "ง. ประมวลกฎหมายอาญาพลเรือน"] },
        { q: "๖. มาตรา ๖ ระบุว่าคำพิพากษาของศาล 'มิสามารถแก้ไขหรือเปลี่ยนแปลงได้' เว้นแต่ในกรณีใด?", a: "ข", options: ["ก. เมื่อจำเลยร้องขอความเป็นธรรม", "ข. เมื่อรูปคดีเปลี่ยนแปลงและศาลเห็นควร", "ค. เมื่อผู้บังคับบัญชาสั่งให้พิจารณาใหม่", "ง. เมื่อมีการประกาศใช้กฎหมายใหม่"] },
        { q: "๗. โทษ 'ลดอัตราชั้นยศ' สำหรับสิบเอกขึ้นไป ปรากฏอยู่ในโทษระดับใดบ้าง?", a: "ง", options: ["ก. สถานเบาเท่านั้น", "ข. สถานกลางเท่านั้น", "ค. สถานหนักเท่านั้น", "ง. ทั้งสถานกลาง และ สถานหนัก"] },
        { q: "๘. ความผิดฐาน 'หมิ่นประมาท' ตามมาตรา ๑๐ มีระวางโทษอยู่ในช่วงใด?", a: "ข", options: ["ก. โทษสถานเบา - โทษสถานกลาง", "ข. โทษสถานกลาง - โทษสถานหนัก", "ค. โทษสถานเบา - โทษสถานหนัก", "ง. โทษสถานหนักเท่านั้น"] },
        { q: "๙. การที่เจ้าพนักงาน 'ไม่ปฏิบัติหน้าที่ที่ตนเองต้องรับผิดชอบ' มีความผิดตามมาตราใด และโทษระดับใด?", a: "ง", options: ["ก. มาตรา ๙ (ละเว้นการปฏิบัติหน้าที่) - โทษสถานเบาถึงหนัก", "ข. มาตรา ๑๒ (ปฏิบัติหน้าที่โดยมิชอบ) - โทษสถานกลางถึงหนัก", "ค. มาตรา ๒๔ (ละเลยหน้าที่) - โทษสถานเบา", "ง. ถูกทั้ง ก และ ค"] },
        { q: "๑๐. หากทหารคนหนึ่งเป็น 'ผู้สนับสนุน' หรือ 'สมรู้ร่วมคิด' ในการทำผิดกฎหมายนี้ตามมาตรา ๑๓ จะต้องรับโทษอย่างไร?", a: "ค", options: ["ก. รับโทษเท่ากับตัวการ", "ข. รับโทษ ๑ ใน ๓ ของโทษที่กำหนด", "ค. รับโทษเพียงกึ่งหนึ่งของโทษที่กำหนด", "ง. รับโทษสถานเบาเสมอ"] },
        { q: "๑๑. 'การเผยแพร่เนื้อหาภายในที่ทำให้ภาพลักษณ์เสียหาย' กฎหมายกำหนดให้ถือว่าเป็นการกระทำผิดร้ายแรงเทียบเท่ากับฐานความผิดใด?", a: "ข", options: ["ก. ก่อจลาจล", "ข. กบฏ", "ค. ปฏิบัติหน้าที่โดยมิชอบ", "ง. หมิ่นประมาท"] },
        { q: "๑๒. 'จำคุกไม่เกิน ๑ ชั่วโมง ปรับไม่เกิน ๓๐๐๐' เป็นโทษเฉพาะที่ระบุไว้ในมาตราใด?", a: "ค", options: ["ก. มาตรา ๑๗", "ข. มาตรา ๓๑", "ค. มาตรา ๓๙ และ ๔๐", "ง. มาตรา ๔๒"] },
        { q: "๑๓. มาตรา ๓๓ ระบุว่าการใช้ 'ไอดีรอง (บุคคลที่สอง)' ไปก่อจลาจลหรือยักยอกทรัพย์ ให้ถือเป็นโทษระดับใด?", a: "ค", options: ["ก. โทษสถานเบา", "ข. โทษสถานกลาง", "ค. โทษสถานหนัก", "ง. ดุลพินิจศาล"] },
        { q: "๑๔. นิยามของคำว่า 'ทหาร' ตามมาตรา ๗ คืออะไร?", a: "ค", options: ["ก. บุคคลที่ถืออาวุธ", "ข. สังกัดกลาโหม", "ค. บุคคลที่อยู่ภายใต้อำนาจกฎหมายฝ่ายทหาร", "ง. ยศสิบตรีขึ้นไป"] },
        { q: "๑๕. ความผิดฐาน 'เบิกความเท็จ' ตามมาตรา ๔๑ มีระวางโทษอยู่ในระดับใด?", a: "ข", options: ["ก. สถานเบา - สถานกลาง", "ข. สถานกลาง - สถานหนัก", "ค. สถานหนักเท่านั้น", "ง. สถานเบาเท่านั้น"] },
        { q: "๑๖. หากทหารนำรถของทางราชการไปขับเล่นโดย 'ไม่ได้รับอนุญาต' แต่เขามีใบขับขี่ถูกต้อง จะมีความผิดตามมาตราใด?", a: "ก", options: ["ก. มาตรา ๓๑", "ข. มาตรา ๓๒", "ค. มาตรา ๔๐", "ง. ไม่มีความผิด"] },
        { q: "๑๗. การกระทำโดย 'ประมาทเลินเล่อ' จนทำให้ระบบราชการเสียหาย ตามมาตรา ๓๘ มีระวางโทษอย่างไร?", a: "ค", options: ["ก. สถานเบาเท่านั้น", "ข. สถานกลางเท่านั้น", "ค. สถานเบา - โทษสถานหนัก", "ง. ปรับ ๓๐๐๐"] },
        { q: "๑๘. ความผิดฐาน 'ก่อกบฏ' ตามมาตรา ๒๓ กำหนดโทษไว้ที่ระดับใดระดับเดียว?", a: "ค", options: ["ก. โทษสถานเบา", "ข. โทษสถานกลาง", "ค. โทษสถานหนัก", "ง. เนรเทศ"] },
        { q: "๑๙. มาตรา ๓ กำหนดให้ 'ประมวลกฎหมายอาญาทหาร' บังคับใช้ตั้งแต่วันที่เท่าใด?", a: "ค", options: ["ก. วันถัดจากประกาศ", "ข. ๑ ม.ค. ๒๕๖๘", "ค. ๙ พฤศจิกายน ๒๕๖๗", "ง. ๙ พฤศจิกายน ๒๕๖๘"] },
        { q: "๒๐. 'การแสวงหาประโยชน์ที่ไม่ถูกต้องตามกฎหมายสำหรับตนเองหรือผู้อื่น' คือนิยามของคำใด?", a: "ก", options: ["ก. โดยทุจริต", "ข. ปฏิบัติหน้าที่โดยมิชอบ", "ค. ยักยอกทรัพย์", "ง. ฉ้อโกง"] },
        { q: "๒๑. นายสิบคนหนึ่ง 'แอบอ้างเป็นนายพัน' เพื่อสิทธิพิเศษ ความผิดนี้เข้าข่ายมาตราใด?", a: "ค", options: ["ก. มาตรา ๑๕", "ข. มาตรา ๒๒", "ค. มาตรา ๒๘", "ง. มาตรา ๑๒"] },
        { q: "๒๒. หากมีการ 'ปลอมแปลงเอกสารราชการ' ตามมาตรา ๒๗ จะได้รับโทษในช่วงใด?", a: "ค", options: ["ก. สถานเบา - กลาง", "ข. สถานกลาง - หนัก", "ค. สถานเบา - หนัก", "ง. หนักเท่านั้น"] },
        { q: "๒๓. 'คุมขัง' ตามกฎหมายนี้หมายถึงข้อใดบ้าง?", a: "ง", options: ["ก. การควบคุมตัว", "ข. ขัง หรือ กักขัง", "ค. จำคุก", "ง. ถูกทุกข้อ"] },
        { q: "๒๔. ความผิดฐาน 'ล่วงละเมิด/คุกคามทางเพศ' (มาตรา ๓๕) ครอบคลุมถึงพฤติกรรมใด?", a: "ง", options: ["ก. ร่างกาย", "ข. คำพูด", "ค. พฤติกรรมที่ก่อให้อับอาย", "ง. ถูกทุกข้อ"] },
        { q: "๒๕. ข้อใดคือโทษสูงสุดของ 'โทษสถานกลาง'?", a: "ค", options: ["ก. จำคุกไม่เกิน ๒๔ ชม.", "ข. ลดชั้นยศและให้ออก", "ค. จำคุกไม่เกิน ๗๒ ชม. และ พ้นตำแหน่ง", "ง. เนรเทศ"] },
        { q: "๒๖. มาตรา ๒๐ 'การฆาตกรรมโดยเจตนา' ระบุระดับโทษไว้อย่างไร?", a: "ค", options: ["ก. โทษสถานหนักเท่านั้น", "ข. สถานกลาง - หนัก", "ค. สถานเบา - หนัก", "ง. ประหารชีวิต"] },
        { q: "๒๗. การ 'ข่มขู่/คุกคาม' เพื่อให้อีกฝ่ายยอมจำนน ตามมาตรา ๓๖ มีโทษระดับใด?", a: "ข", options: ["ก. สถานเบา - กลาง", "ข. สถานกลาง - หนัก", "ค. หนักเท่านั้น", "ง. สถานเบา - หนัก"] },
        { q: "๒๘. ทหารที่ 'ไม่หยุดรถ' เมื่อสารวัตรทหารเรียกตรวจ ตามมาตรา ๓๙ มีความผิดฐานใด?", a: "ข", options: ["ก. ขัดคำสั่งผู้บังคับบัญชา", "ข. ฝ่าฝืนคำสั่งเจ้าพนักงาน", "ค. หลบหนี", "ง. ต่อสู้ขัดขวาง"] },
        { q: "๒๙. หากนายทหารระดับบังคับบัญชาทำผิด และถูกสั่งให้ 'พ้นตำแหน่งหน้าที่' โทษนี้จัดอยู่ในระดับใด?", a: "ข", options: ["ก. โทษสถานเบา", "ข. โทษสถานกลาง", "ค. โทษสถานหนัก", "ง. โทษวินัยเลว"] },
        { q: "๓๐. มาตรา ๕ ระบุว่า หากกฎหมายอื่นอ้างถึง 'กฎหมายลักษณะอาญา' ให้เปลี่ยนไปอ้างอิงถึงกฎหมายใดแทน?", a: "ก", options: ["ก. ประมวลกฎหมายอาญา (ใหม่)", "ข. รัฐธรรมนูญ", "ค. จารีตประเพณี", "ง. กฎอัยการศึก"] }
    ];

    let userName = "";
    let selectedQuestions = []; 

    function getRandomElements(array, count) {
        let shuffled = [...array].sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
    }

    function startQuiz() {
        userName = document.getElementById('username').value.trim();
        const lowerName = userName.toLowerCase();
        
        if (!allowedUsers.includes(lowerName)) {
            alert("❌ สิทธิ์ของท่านไม่เพียงพอต่อการเข้าถึงระบบตุลาการ");
            return;
        }

        const hasFinished = localStorage.getItem("quiz_done_" + lowerName);
        if (hasFinished && lowerName !== "mininbird") {
            alert("❌ ท่านได้ลงมติไปแล้วในระบบ ไม่สามารถพิจารณาคดีซ้ำได้");
            return;
        }

        const essaySelected = getRandomElements(essayQuestions, 5).map(q => ({...q, type: 'essay'}));
        const choiceSelected = getRandomElements(choiceQuestions, 25).map(q => ({...q, type: 'choice'}));
        selectedQuestions = getRandomElements([...essaySelected, ...choiceSelected], 30);

        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        document.getElementById('display-name').innerText = "⚖️ ตุลาการพิจารณา: " + userName;
        renderQuiz();
    }

    function renderQuiz() {
        const container = document.getElementById('quiz-container');
        let html = '';
        selectedQuestions.forEach((item, index) => {
            html += `<div class="quiz-item">`;
            if (item.type === 'essay') {
                html += `<span class="type-tag">[ข้อเขียนวินิจฉัยเชิงซ้อน]</span>`;
                html += `<div class="question-text">${index + 1}. ${item.q}</div>`;
                html += `<textarea id="ans${index}" placeholder="พิมพ์คำวินิจฉัยและระบุตัวบทกฎหมายที่นี่..."></textarea>`;
            } else {
                html += `<span class="type-tag type-tag-choice">[ตัวเลือกปรนัย]</span>`;
                html += `<div class="question-text">${index + 1}. ${item.q}</div>`;
                html += `<div class="options-group">`;
                item.options.forEach((opt, i) => {
                    const val = ["ก", "ข", "ค", "ง"][i];
                    html += `<label><input type="radio" name="q${index}" value="${val}"> ${opt}</label>`;
                });
                html += `</div>`;
            }
            html += `</div>`;
        });
        container.innerHTML = html;
        window.scrollTo(0, 0);
    }

    function calculateScore() {
        let score = 0;
        let unanswered = [];

        for(let i=0; i<selectedQuestions.length; i++) {
            const item = selectedQuestions[i];
            if (item.type === 'choice') {
                const sel = document.querySelector(`input[name="q${i}"]:checked`);
                if (!sel) {
                    unanswered.push(i + 1);
                } else if (sel.value === item.a) {
                    score++;
                }
            } else {
                const textAns = document.getElementById(`ans${i}`).value.trim();
                if (textAns === "") {
                    unanswered.push(i + 1);
                } else {
                    let matchCount = 0;
                    item.keys.forEach(key => {
                        if (textAns.includes(key)) matchCount++;
                    });
                    if ((matchCount / item.keys.length) >= 0.8) {
                        score++;
                    }
                }
            }
        }

        if (unanswered.length > 0) {
            alert("⚠️ คำพิพากษายังไม่ครบถ้วนในข้อที่: " + unanswered.join(", "));
            return;
        }

        localStorage.setItem("quiz_done_" + userName.toLowerCase(), "true");

        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('user-result-name').innerText = "คำวินิจฉัยของตุลาการ: " + userName;
        document.getElementById('score-display').innerText = score + "/30";
        
        const feedback = document.getElementById('feedback-msg');
        if (score >= 26) feedback.innerText = "ระดับตุลาการสูงสุด (The High Judge)";
        else if (score >= 18) feedback.innerText = "ระดับผู้พิพากษาชำนาญการ";
        else feedback.innerText = "ระดับผู้ช่วยผู้พิพากษา (ต้องศึกษาเพิ่มเติม)";
    }
</script>
</body>
</html>
